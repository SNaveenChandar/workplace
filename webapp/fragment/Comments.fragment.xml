<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:u="sap.ui.unified"
    xmlns:layout="sap.ui.layout"
>
    <Dialog
        showHeader="false"
        verticalScrolling="false"
        contentHeight="85%"
        contentWidth="90%"
        draggable="true"
        resizable="true"
    >
        <f:DynamicPage
            stickySubheaderProvider="CreateProductWizard"
            toggleHeaderOnTitleClick="false"
            class="sapUiNoContentPadding"
            showFooter="true"
        >
            <f:title>
                <f:DynamicPageTitle>
                    <f:heading>
                        <Title id="idCommentTitle"/>
                    </f:heading>

                    <f:actions>
                        <Button
                            text="Close"
                            type="Reject"
                            press="onCommentsClose"
                        />
                    </f:actions>
                </f:DynamicPageTitle>
            </f:title>

            <f:content>
                <IconTabBar
                    id="idIconTabBar"
                    select="onTabSwitch"
                    class="sapUiNoContentPadding"
                    expanded="true"
                    expandable="false"
                    selectedKey="1"
                >
                    <items>
                        <IconTabFilter
                            design="Horizontal"
                            text="{i18n>internalComments}"
                            class="sapUiNoContentPadding"
                        >
                            <Panel
                                expanded="true"
                                stickyHeader="true"
                                height="375px"
                                width="auto"
                                class="sapUiNoContentPadding"
                            >
                                <content>
                                    <List
                                        id="idInternalCommentList"
                                        showSeparators="Inner"
                                        growing="true"
                                        growingThreshold="5"
                                        growingDirection="Downwards"
                                        growingTriggerText="Load Comments..."
                                        items="{comments>/internalComments}"
                                    >
                                        <FeedListItem
                                            sender="{comments>sender}"
                                            text="{comments>text}"
                                            timestamp="{comments>date}"
                                        >
                                            <FeedListItemAction
                                                text="Edit"
                                                icon="sap-icon://edit"
                                                press="onEditComment($event,'EditInternalComment')"
                                            />
                                        </FeedListItem>
                                    </List>
                                </content>
                            </Panel>
                            <FeedInput
                                id="idInternalCommentInput"
                                post="onPostComment('idInternalCommentInput','AddInternalComment','idInternalCommentList')"
                                showIcon="false"
                                placeholder="{i18n>commentPlaceholder}"
                                class="sapUiSmallMarginTopBottom sapUiSmallMarginBegin"
                                
                            />
                        </IconTabFilter>

                        <IconTabFilter
                            design="Horizontal"
                            text="{i18n>externalComments}"
                            class="sapUiNoContentPadding"
                        >
                            <Panel
                                expanded="true"
                                stickyHeader="true"
                                height="375px"
                                width="auto"
                                class="sapUiNoContentPadding"
                            >
                                <content>
                                    <List
                                        id="idExternalCommentList"
                                        showSeparators="Inner"
                                        growing="true"
                                        growingThreshold="5"
                                        growingDirection="Downwards"
                                        growingTriggerText="Load Comments..."
                                        items="{comments>/externalComments}"
                                    >
                                        <FeedListItem
                                            sender="{comments>sender}"
                                            text="{comments>text}"
                                            timestamp="{comments>date}"
                                        >
                                            <FeedListItemAction
                                                text="Edit"
                                                icon="sap-icon://edit"
                                                press="onEditComment($event,'EditExternalComment')"
                                            />
                                        </FeedListItem>
                                    </List>
                                </content>
                            </Panel>

                            <FeedInput
                                id="idExternalCommentInput"
                                showIcon="false"
                                post="onPostComment('idExternalCommentInput','AddExternalComment','idExternalCommentList')"
                                placeholder="{i18n>commentPlaceholder}"
                                class="sapUiSmallMarginTopBottom sapUiSmallMarginBegin"

                            />
                        </IconTabFilter>
                    </items>
                    <content />
                </IconTabBar>
            </f:content>
        </f:DynamicPage>
    </Dialog>
</core:FragmentDefinition>
